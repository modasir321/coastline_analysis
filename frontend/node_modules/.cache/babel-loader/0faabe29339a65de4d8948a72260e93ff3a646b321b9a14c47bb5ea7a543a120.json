{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dell\\\\Desktop\\\\Coastline\\\\coastline_analysis\\\\frontend\\\\src\\\\MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, GeoJSON } from 'react-leaflet';\nimport axios from 'axios';\nimport * as turf from '@turf/turf';\nimport DatePicker from './DatePicker';\nimport 'leaflet/dist/leaflet.css';\nimport './styles.css';\nimport L from 'leaflet';\n\n// Fix Leaflet icons\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nconst layerStyles = {\n  baseline: {\n    color: '#ff0000',\n    weight: 3,\n    fillOpacity: 0\n  },\n  comparison: {\n    color: '#00ff00',\n    weight: 2,\n    fillOpacity: 0\n  },\n  erosion: {\n    color: '#ff0000',\n    weight: 3,\n    dashArray: '5,5',\n    fillColor: '#ff0000',\n    fillOpacity: 0.3\n  },\n  accretion: {\n    color: '#00ff00',\n    weight: 3,\n    dashArray: '5,5',\n    fillColor: '#00ff00',\n    fillOpacity: 0.3\n  }\n};\nconst MapComponent = () => {\n  _s();\n  const [mapData, setMapData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleDateSelect = async endDate => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post('http://localhost:5000/get-map-data', {\n        end_date: endDate\n      });\n      setMapData({\n        baseline: response.data.baseline_geojson,\n        comparison: response.data.comparison_vectors,\n        erosion: response.data.erosion,\n        accretion: response.data.accretion\n      });\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renderGeometry = (data, style) => {\n    if (!data) return null;\n    try {\n      const simplified = turf.simplify(data, {\n        tolerance: 0.001,\n        highQuality: true\n      });\n      return /*#__PURE__*/_jsxDEV(GeoJSON, {\n        data: simplified,\n        style: style\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 14\n      }, this);\n    } catch (e) {\n      console.error(\"Rendering error:\", e);\n      return /*#__PURE__*/_jsxDEV(GeoJSON, {\n        data: data,\n        style: style\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 14\n      }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [46.5107, -63.4168],\n      zoom: 10,\n      style: {\n        height: '100vh',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 OpenStreetMap contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), (mapData === null || mapData === void 0 ? void 0 : mapData.baseline) && renderGeometry(mapData.baseline, layerStyles.baseline), (mapData === null || mapData === void 0 ? void 0 : mapData.comparison) && renderGeometry(mapData.comparison, layerStyles.comparison), (mapData === null || mapData === void 0 ? void 0 : mapData.erosion) && renderGeometry(mapData.erosion, layerStyles.erosion), (mapData === null || mapData === void 0 ? void 0 : mapData.accretion) && renderGeometry(mapData.accretion, layerStyles.accretion)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"sCHTPPerVgik43+XKZMp2V3gTk8=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","GeoJSON","axios","turf","DatePicker","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","layerStyles","baseline","color","weight","fillOpacity","comparison","erosion","dashArray","fillColor","accretion","MapComponent","_s","mapData","setMapData","loading","setLoading","error","setError","handleDateSelect","endDate","response","post","end_date","data","baseline_geojson","comparison_vectors","_error$response","_error$response$data","message","renderGeometry","style","simplified","simplify","tolerance","highQuality","fileName","_jsxFileName","lineNumber","columnNumber","e","console","className","children","center","zoom","height","width","url","attribution","_c","$RefreshReg$"],"sources":["C:/Users/dell/Desktop/Coastline/coastline_analysis/frontend/src/MapComponent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { MapContainer, TileLayer, GeoJSON } from 'react-leaflet';\r\nimport axios from 'axios';\r\nimport * as turf from '@turf/turf';\r\nimport DatePicker from './DatePicker';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './styles.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix Leaflet icons\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n});\r\n\r\nconst layerStyles = {\r\n  baseline: { \r\n    color: '#ff0000', \r\n    weight: 3,\r\n    fillOpacity: 0\r\n  },\r\n  comparison: { \r\n    color: '#00ff00', \r\n    weight: 2,\r\n    fillOpacity: 0\r\n  },\r\n  erosion: { \r\n    color: '#ff0000', \r\n    weight: 3,\r\n    dashArray: '5,5',\r\n    fillColor: '#ff0000',\r\n    fillOpacity: 0.3\r\n  },\r\n  accretion: {\r\n    color: '#00ff00',\r\n    weight: 3,\r\n    dashArray: '5,5',\r\n    fillColor: '#00ff00',\r\n    fillOpacity: 0.3\r\n  }\r\n};\r\n\r\nconst MapComponent = () => {\r\n  const [mapData, setMapData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleDateSelect = async (endDate) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/get-map-data', {\r\n        end_date: endDate\r\n      });\r\n\r\n      setMapData({\r\n        baseline: response.data.baseline_geojson,\r\n        comparison: response.data.comparison_vectors,\r\n        erosion: response.data.erosion,\r\n        accretion: response.data.accretion\r\n      });\r\n\r\n    } catch (error) {\r\n      setError(error.response?.data?.error || error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderGeometry = (data, style) => {\r\n    if (!data) return null;\r\n    \r\n    try {\r\n      const simplified = turf.simplify(data, {tolerance: 0.001, highQuality: true});\r\n      return <GeoJSON data={simplified} style={style} />;\r\n    } catch (e) {\r\n      console.error(\"Rendering error:\", e);\r\n      return <GeoJSON data={data} style={style} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"map-container\">\r\n      <MapContainer \r\n        center={[46.5107, -63.4168]}\r\n        zoom={10}\r\n        style={{ height: '100vh', width: '100%' }}\r\n      >\r\n        <TileLayer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          attribution='&copy; OpenStreetMap contributors'\r\n        />\r\n\r\n        {/* Baseline Shapefile */}\r\n        {mapData?.baseline && renderGeometry(mapData.baseline, layerStyles.baseline)}\r\n        \r\n        {/* Comparison Vectors */}\r\n        {mapData?.comparison && renderGeometry(mapData.comparison, layerStyles.comparison)}\r\n        \r\n        {/* Changes */}\r\n        {mapData?.erosion && renderGeometry(mapData.erosion, layerStyles.erosion)}\r\n        {mapData?.accretion && renderGeometry(mapData.accretion, layerStyles.accretion)}\r\n\r\n        {/* Legend remains same */}\r\n      </MapContainer>\r\n\r\n      {/* Date picker and status elements */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}